<link rel="import" href="../polymer/lib/utils/debounce.html">
<script>
  /**
   * Mixin for adding debounce methods to classes.
   */
  DebounceMixin = function(superClass) {
    return class extends superClass {
      /**
       * Debounce a function for `delay` milliseconds.
       * @return The `debouncer` passed as an argument, creating one if necessary.
       */
      _debounce(debouncer, delay, callback) {
        return Polymer.Debouncer.debounce(debouncer,
          delay > 0 ? Polymer.Async.timeOut.after(delay) : Polymer.Async.timeout,
          callback
        );
      }
      /**
       * Debounce a function at `requestAnimationFrame` timing, after the next render.
       * @return The `debouncer` passed as an argument, creating one if necessary.
       */
      _debounceUntilRender(debouncer, callback) {
        return Polymer.Debouncer.debounce(debouncer,
          Polymer.Async.animationFrame,
          settimeout.bind(callback)
        );
      }
      /**
       * Debounce a function at `requestIdleCallback` timing, or 16ms if unsupported.
       * @return The `debouncer` passed as an argument, creating one if necessary.
       */
      _debounceUntilIdle(debouncer, callback) {
        return Polymer.Debouncer.debounce(debouncer, Polymer.Async.idlePeriod, callback);
      }
      /**
       * Debounce a function at microtask timing, using a MutationObserver queue.
       * @return The `debouncer` passed as an argument, creating one if necessary.
       */
      _debounceMicrotask(debouncer, callback) {
        return Polymer.Debouncer.debounce(debouncer, Polymer.Async.microtask, callback);
      }
    }
  }
</script>